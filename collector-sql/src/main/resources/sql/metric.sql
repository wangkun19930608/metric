CREATE TABLE metric_name (
	id INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
	name VARCHAR(64) NOT NULL,
	minute_size INTEGER NOT NULL DEFAULT 0,
	quarter_size INTEGER NOT NULL DEFAULT 0,
	aggregated_time INTEGER NOT NULL DEFAULT 0,
	tags LONGBLOB DEFAULT NULL,
	UNIQUE (name));

CREATE TABLE metric_minute (
	pk BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	id INTEGER NOT NULL,
	time INTEGER NOT NULL,
	_count BIGINT NOT NULL,
	_sum DOUBLE NOT NULL,
	_max DOUBLE NOT NULL,
	_min DOUBLE NOT NULL,
	_sqr DOUBLE NOT NULL,
	tags LONGBLOB NOT NULL,
	KEY (id, time));

CREATE TABLE metric_quarter (
	pk BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT,
	id INTEGER NOT NULL,
	time INTEGER NOT NULL,
	_count BIGINT NOT NULL,
	_sum DOUBLE NOT NULL,
	_max DOUBLE NOT NULL,
	_min DOUBLE NOT NULL,
	_sqr DOUBLE NOT NULL,
	tags LONGBLOB NOT NULL,
	KEY (id, time));

CREATE TABLE metric_tags_quarter (
	id INTEGER NOT NULL,
	time INTEGER NOT NULL,
	tags LONGBLOB NOT NULL,
	PRIMARY KEY (id, time),
	KEY (time));